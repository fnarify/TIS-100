@0
MOV RIGHT,ACC
ST: MOV ACC,DOWN
 MOV ACC,DOWN
 MOV RIGHT,ACC
 JEZ END
 SUB DOWN
 JGZ _1
 ADD DOWN
JMP ST
_1: MOV DOWN,ACC
JMP ST
END:MOV DOWN,RIGHT
 MOV DOWN,NIL

@1
LP: MOV UP,ACC
 MOV ACC,LEFT
  MOV ACC,RIGHT
 JEZ END
 SWP
 ADD 1
 SWP
JMP LP
END: MOV LEFT,DOWN
 SWP
 MOV ACC,DOWN

@2
LP: MOV LEFT,ACC
 MOV ACC,DOWN
 SWP
 ADD DOWN
 SWP
JNZ LP
SWP
MOV ACC,DOWN

@3
MOV UP,DOWN
MOV UP,ACC
ADD 1
MOV ACC,DOWN
MOV RIGHT,DOWN

@4
LP: JRO RIGHT
 ADD RIGHT
JMP LP
MOV ACC,RIGHT
MOV 0,ACC

@5
MOV UP,ACC
SWP
MOV UP,ACC
LP: SWP
 MOV ACC,LEFT
 ADD 1
 MOV -1,LEFT
 SWP
 SUB 1
JNZ LP
MOV 0,LEFT
MOV 1,LEFT
MOV LEFT,ACC
SUB UP
MOV ACC,DOWN

@6
